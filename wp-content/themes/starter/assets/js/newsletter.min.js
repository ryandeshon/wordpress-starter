!function(i){window.Newsletter=function(r){on_form_submission_error=function(i,r,n){e.clicked=!1;display_error("OOPS! Email subscription is currently not working. Please try again later."),e.form.css("opacity",1)},on_form_submission_success=function(i,r,n){var o=JSON.parse(i);if(o.redirect)e.display_error("You have been unsubscribed from all newsletters and will be redirected back to Read It Forward."),setTimeout(function(){window.location.replace(o.redirect.url)},2e3);else{if(o.Pid){var s=o.Pid.Pid,t=o.Pid.Subs;utag.link({pid:s,newsletter_name:t,event_type:"newsletter_signup"})}document.getElementById("pc-wrapper")||e.form.hide(),e.display_confirmation()}},this.clicked=!1,this.display_confirmation=function(){e.clicked=!1,e.form.css("opacity",1),e.errorEl.hide(),e.confirmation.show()},this.display_error=function(i){e.clicked=!1,e.form.css("opacity",1),e.errorEl.html(i),e.errorEl.show()},this.formSubmission=function(i){if(e.form.css("opacity",.5),!e.clicked){e.clicked=!0;var r=e.form.find('input[name="Email"]').val();void 0;var n=e.form.find('input[name="ajaxurl"]').val(),o={email:r,nonce:e.form.find('input[name="nonce"]').val(),action:e.form.find('input[name="action"]').val(),refurl:encodeURI(document.location.href)};e.submitForm(n,o)}},this.submitForm=function(r,n){e.form.css("opacity",.4),i.ajax({url:r,data:n,success:on_form_submission_success,error:on_form_submission_error})},this.form=i(r).find('form[name="subscribe"]'),this.errorEl=i(r).find(".js-error"),this.confirmation=i(r).find(".js-success");var e=this;return this.init=function(){new FormValidator("subscribe",[{name:"Email",rules:"valid_email|required"}],function(r,n){r.length>0?i.each(r,function(i,r){e.errorEl.html(r.message),e.errorEl.show()}):(n.preventDefault(),e.errorEl.hide(),e.formSubmission())})},this},i(".js-subscribe").each(function(i,r){new window.Newsletter(r).init()})}(jQuery);